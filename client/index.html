<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Facebook Login</title>
	<script src="https://connect.facebook.net/en_US/sdk.js"></script>
	<script>
		// This function is called when the user clicks the login button
		function loginWithFacebook() {
			FB.login(function(response) {
				if (response.authResponse) {
					// Call the Netlify function to get the user's profile data
					fetch('/.netlify/functions/facebook-login', {
						method: 'POST',
						body: JSON.stringify({ accessToken: response.authResponse.accessToken })
					})
					.then(response => response.json())
					.then(data => {
						console.log(data);
						// TODO: Handle the user's profile data
					})
					.catch(error => console.error(error));
				} else {
					console.log('User cancelled login or did not fully authorize.');
				}
			}, {scope: 'public_profile,email'});
		}
		window.fbAsyncInit = function() {
			FB.init({
				appId      : '{your-app-id}',
				cookie     : true,
				xfbml      : true,
				version    : 'v12.0'
			});
			FB.AppEvents.logPageView();
		};
	</script>
</head>
<body>
	<h1>Facebook Login</h1>
	<button onclick="loginWithFacebook()">Login with Facebook</button>
</body>
</html>
